# AHZ UserHub Backend - ç”¨æˆ·ä¸­å¿ƒåç«¯æœåŠ¡

> ä½œè€…ï¼šahz

ä¸€ä¸ªåŸºäº Spring Boot çš„ç”¨æˆ·ä¸­å¿ƒåç«¯ç³»ç»Ÿï¼Œå®ç°äº†ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æŸ¥è¯¢ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## é¡¹ç›®ç®€ä»‹

æœ¬é¡¹ç›®æ˜¯æˆ‘åœ¨å­¦ä¹  Spring Boot è¿‡ç¨‹ä¸­å¼€å‘çš„ä¸€ä¸ªç”¨æˆ·ä¸­å¿ƒåç«¯æœåŠ¡ï¼Œé‡‡ç”¨ Spring Boot æ¡†æ¶å®ç°å®Œæ•´çš„ç”¨æˆ·ç®¡ç†åŠŸèƒ½ã€‚ä½œä¸ºå­¦ä¹ é¡¹ç›®ï¼Œç³»ç»Ÿé€»è¾‘å’ŒåŠŸèƒ½å¹¶ä¸å¤æ‚ï¼Œä»£ç é‡ä¹Ÿä¸å¤šï¼Œä½†æ­£å› å¦‚æ­¤ï¼Œå¤§å®¶å¯ä»¥æ›´è½»æ¾åœ°å­¦ä¹ åˆ° **é€šç”¨çš„æŠ€æœ¯å’Œåšé¡¹ç›®çš„ç»éªŒ**ã€‚

æœ¬é¡¹ç›®å®Œå…¨å¼€æºï¼Œæ¬¢è¿åŒæ ·åœ¨å­¦ä¹  Spring Boot çš„åŒå­¦å‚è€ƒã€å­¦ä¹ å’Œäº¤æµï¼

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- **Java 21** - ç¼–ç¨‹è¯­è¨€
- **Spring Boot 3.2.0** - åº”ç”¨æ¡†æ¶
- **Spring MVC** - Web æ¡†æ¶
- **Spring Security** - å®‰å…¨æ¡†æ¶ï¼ˆç”¨äº BCrypt å¯†ç åŠ å¯†ï¼‰

### æ•°æ®è®¿é—®
- **MyBatis 3.5.15** - ORM æ¡†æ¶
- **MyBatis Plus 3.5.5** - MyBatis å¢å¼ºå·¥å…·
- **MySQL 8.0** - å…³ç³»å‹æ•°æ®åº“

### ç¼“å­˜
- **Redis** - åˆ†å¸ƒå¼ç¼“å­˜ï¼ˆç”¨äº Token å­˜å‚¨ï¼‰

### å·¥å…·åº“
- **Lombok** - ç®€åŒ– Java ä»£ç 
- **Apache Commons Lang3** - å·¥å…·ç±»åº“
- **FastJSON2 2.0.43** - JSON åºåˆ—åŒ–

### æµ‹è¯•
- **JUnit 5** - å•å…ƒæµ‹è¯•æ¡†æ¶
- **Spring Boot Test** - é›†æˆæµ‹è¯•

## æ ¸å¿ƒåŠŸèƒ½

- âœ… **ç”¨æˆ·æ³¨å†Œ** - æ”¯æŒè´¦å·å¯†ç æ³¨å†Œï¼Œå¯†ç ä½¿ç”¨ BCrypt åŠ å¯†
- âœ… **ç”¨æˆ·ç™»å½•** - åŸºäº Token çš„ç™»å½•è®¤è¯ï¼ŒToken å­˜å‚¨åœ¨ Redis
- âœ… **ç”¨æˆ·æ³¨é”€** - æ¸…é™¤ Redis ä¸­çš„ç™»å½• Token
- âœ… **ç”¨æˆ·æŸ¥è¯¢** - ç®¡ç†å‘˜å¯æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼ˆæ”¯æŒæ¨¡ç³Šæœç´¢ï¼‰
- âœ… **ç”¨æˆ·åˆ é™¤** - ç®¡ç†å‘˜å¯åˆ é™¤ç”¨æˆ·ï¼ˆé€»è¾‘åˆ é™¤ï¼‰
- âœ… **ç»Ÿä¸€å“åº”æ ¼å¼** - ç»Ÿä¸€çš„ API å“åº”ç»“æ„
- âœ… **å…¨å±€å¼‚å¸¸å¤„ç†** - ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- âœ… **ç”¨æˆ·ä¿¡æ¯è„±æ•** - è¿”å›ç”¨æˆ·ä¿¡æ¯æ—¶è‡ªåŠ¨è„±æ•
- âœ… **ç™»å½•æ‹¦æˆªå™¨** - åŸºäº Token çš„è¯·æ±‚æ‹¦æˆªå’Œæƒé™æ ¡éªŒ
- âœ… **è·¨åŸŸæ”¯æŒ** - é…ç½® CORS è·¨åŸŸè®¿é—®

## é¡¹ç›®ç»“æ„

```
ahz-userhub-backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/ahz/usercenter/
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/          # æ§åˆ¶å™¨å±‚ï¼ˆRESTful APIï¼‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ service/             # æœåŠ¡å±‚ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserService.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ impl/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ UserServiceImpl.java
â”‚   â”‚   â”‚   â”œâ”€â”€ mapper/              # æ•°æ®è®¿é—®å±‚ï¼ˆMyBatisï¼‰
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserMapper.java
â”‚   â”‚   â”‚   â”œâ”€â”€ model/               # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ domain/          # å®ä½“ç±»
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ User.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ request/     # è¯·æ±‚å¯¹è±¡
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserRegisterRequest.java
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserLoginRequest.java
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ response/    # å“åº”å¯¹è±¡
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ LoginResponse.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ dto/             # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ UserDTO.java
â”‚   â”‚   â”‚   â”œâ”€â”€ common/              # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Result.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorCode.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ResultUtils.java
â”‚   â”‚   â”‚   â”œâ”€â”€ config/              # é…ç½®ç±»
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ WebMvcConfig.java
â”‚   â”‚   â”‚   â”œâ”€â”€ interceptor/         # æ‹¦æˆªå™¨
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ LoginInterceptor.java
â”‚   â”‚   â”‚   â”œâ”€â”€ exception/           # å¼‚å¸¸å¤„ç†
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ BusinessException.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ GlobalExceptionHandler.java
â”‚   â”‚   â”‚   â”œâ”€â”€ utils/               # å·¥å…·ç±»
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TokenUtils.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserContext.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserConvertor.java
â”‚   â”‚   â”‚   â”œâ”€â”€ contant/             # å¸¸é‡ç±»
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserConstant.java
â”‚   â”‚   â”‚   â””â”€â”€ UserCenterApplication.java  # å¯åŠ¨ç±»
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ application.yml      # é…ç½®æ–‡ä»¶
â”‚   â”‚       â””â”€â”€ mapper/              # MyBatis XML æ˜ å°„æ–‡ä»¶
â”‚   â”‚           â””â”€â”€ UserMapper.xml
â”‚   â”‚       â””â”€â”€ sql/                 # SQL è„šæœ¬
â”‚   â”‚           â””â”€â”€ create_table.sql
â”‚   â””â”€â”€ test/                        # æµ‹è¯•ä»£ç 
â”‚       â””â”€â”€ java/com/ahz/usercenter/
â”‚           â”œâ”€â”€ UserCenterApplicationTests.java
â”‚           â””â”€â”€ service/
â”‚               â””â”€â”€ UserServiceTest.java
â”œâ”€â”€ pom.xml                          # Maven é…ç½®
â””â”€â”€ README.md                        # é¡¹ç›®è¯´æ˜
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **JDK 21+**
- **Maven 3.6+**
- **MySQL 8.0+**
- **Redis 5.0+**ï¼ˆç”¨äº Token å­˜å‚¨ï¼‰

### 1. æ•°æ®åº“åˆå§‹åŒ–

æ‰§è¡Œ `sql/create_table.sql` æ–‡ä»¶ä¸­çš„ SQL è¯­å¥åˆ›å»ºæ•°æ®åº“å’Œè¡¨ï¼š

```sql
-- åˆ›å»ºæ•°æ®åº“
create database if not exists ahz_userhub;

-- ä½¿ç”¨æ•°æ®åº“
use ahz_userhub;

-- åˆ›å»ºç”¨æˆ·è¡¨ï¼ˆSQL æ–‡ä»¶ä¸­æœ‰å®Œæ•´è¡¨ç»“æ„ï¼‰
```

### 2. é…ç½®æ–‡ä»¶ä¿®æ”¹

ä¿®æ”¹ `src/main/resources/application.yml` ä¸­çš„é…ç½®ä¿¡æ¯ï¼š

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/ahz_userhub?serverTimezone=Asia/Shanghai&useUnicode=true&characterEncoding=utf-8&useSSL=false
    username: root        # ä¿®æ”¹ä¸ºä½ çš„ MySQL ç”¨æˆ·å
    password: 123456      # ä¿®æ”¹ä¸ºä½ çš„ MySQL å¯†ç 
  
  redis:
    host: localhost       # Redis åœ°å€
    port: 6379           # Redis ç«¯å£
    database: 0           # Redis æ•°æ®åº“ç´¢å¼•

server:
  port: 8080             # æœåŠ¡ç«¯å£
  servlet:
    context-path: /api   # ä¸Šä¸‹æ–‡è·¯å¾„
```

### 3. å¯åŠ¨ Redis

ç¡®ä¿ Redis æœåŠ¡å·²å¯åŠ¨ï¼š

```bash
# Windows
redis-server

# Linux/Mac
redis-server
```

### 4. è¿è¡Œé¡¹ç›®

> **æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä½¿ç”¨æ ‡å‡† Maven å‘½ä»¤è¿è¡Œï¼Œè¯·ç¡®ä¿å·²å®‰è£… Maven 3.6+ å¹¶é…ç½®å¥½ç¯å¢ƒå˜é‡ã€‚å¯ä»¥é€šè¿‡ `mvn -v` å‘½ä»¤æ£€æŸ¥ Maven æ˜¯å¦å®‰è£…æˆåŠŸã€‚

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Maven æ’ä»¶è¿è¡Œï¼ˆæ¨èï¼‰

```bash
mvn spring-boot:run
```

è¿™ç§æ–¹å¼ä¼šç›´æ¥å¯åŠ¨ Spring Boot åº”ç”¨ï¼Œé€‚åˆå¼€å‘è°ƒè¯•ã€‚

#### æ–¹å¼äºŒï¼šæ‰“åŒ…åè¿è¡Œ

```bash
# æ‰“åŒ…é¡¹ç›®ï¼ˆè·³è¿‡æµ‹è¯•å¯åŠ å¿«æ‰“åŒ…é€Ÿåº¦ï¼‰
mvn clean package -DskipTests

# è¿è¡Œ JAR åŒ…
java -jar target/ahz-userhub-backend-0.0.1-SNAPSHOT.jar
```

æ‰“åŒ…åçš„ JAR åŒ…å¯ä»¥éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚

#### æ–¹å¼ä¸‰ï¼šä½¿ç”¨ IDE è¿è¡Œ

1. ä½¿ç”¨ IntelliJ IDEA æˆ– Eclipse ç­‰ IDE æ‰“å¼€é¡¹ç›®
2. ç­‰å¾… Maven ä¾èµ–ä¸‹è½½å®Œæˆ
3. æ‰¾åˆ° `src/main/java/com/ahz/usercenter/UserCenterApplication.java`
4. å³é”®è¿è¡Œ `main` æ–¹æ³•

**æç¤º**ï¼šé¦–æ¬¡è¿è¡Œå‰ï¼Œè¯·ç¡®ä¿ï¼š
- MySQL æ•°æ®åº“å·²åˆ›å»ºå¹¶æ‰§è¡Œäº†åˆå§‹åŒ– SQL
- Redis æœåŠ¡å·²å¯åŠ¨
- `application.yml` ä¸­çš„é…ç½®ä¿¡æ¯å·²æ­£ç¡®ä¿®æ”¹

### 5. éªŒè¯å¯åŠ¨

å¯åŠ¨æˆåŠŸåï¼Œæ§åˆ¶å°ä¼šæ˜¾ç¤ºç±»ä¼¼ä»¥ä¸‹ä¿¡æ¯ï¼š

```
Started UserCenterApplication in X.XXX seconds
```

æ­¤æ—¶å¯ä»¥è®¿é—®ä»¥ä¸‹æ¥å£è¿›è¡ŒéªŒè¯ï¼š

- **å¥åº·æ£€æŸ¥**ï¼š`http://localhost:8080/api/user/getInfo`ï¼ˆéœ€è¦ç™»å½• Tokenï¼‰
- **Swagger æ–‡æ¡£**ï¼š`http://localhost:8080/api/doc.html`

å¦‚æœå¯åŠ¨å¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ•°æ®åº“è¿æ¥é…ç½®æ˜¯å¦æ­£ç¡®
2. Redis æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
3. ç«¯å£ 8080 æ˜¯å¦è¢«å ç”¨

## API æ¥å£æ–‡æ¡£

### Swagger æ–‡æ¡£

é¡¹ç›®å·²é›†æˆ Swaggerï¼ˆSpringDoc OpenAPIï¼‰ï¼Œå¯åŠ¨é¡¹ç›®åå¯é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—® API æ–‡æ¡£ï¼š

- **Swagger UI**: `http://localhost:8080/api/swagger-ui/index.html`
- **OpenAPI JSON**: `http://localhost:8080/api/v3/api-docs`

åœ¨ Swagger UI ä¸­å¯ä»¥ï¼š
- æŸ¥çœ‹æ‰€æœ‰ API æ¥å£
- æµ‹è¯•æ¥å£åŠŸèƒ½
- æŸ¥çœ‹è¯·æ±‚å‚æ•°å’Œå“åº”æ ¼å¼
- æŸ¥çœ‹æ¥å£è¯´æ˜å’Œç¤ºä¾‹

ğŸ“– **è¯¦ç»†ä½¿ç”¨æŒ‡å—è¯·å‚è€ƒ**: [SWAGGER_USAGE.md](./SWAGGER_USAGE.md)

### åŸºç¡€ä¿¡æ¯

- **Base URL**: `http://localhost:8080/api`
- **Content-Type**: `application/json`
- **è®¤è¯æ–¹å¼**: Token è®¤è¯ï¼ˆåœ¨è¯·æ±‚å¤´ä¸­æºå¸¦ `Authorization: <token>`ï¼‰

### ç»Ÿä¸€å“åº”æ ¼å¼

```json
{
  "code": 0,           // çŠ¶æ€ç ï¼Œ0 è¡¨ç¤ºæˆåŠŸ
  "data": {},          // å“åº”æ•°æ®
  "message": "ok",     // å“åº”æ¶ˆæ¯
  "description": ""    // æè¿°ä¿¡æ¯
}
```

### æ¥å£åˆ—è¡¨

> ğŸ’¡ **æç¤º**: å»ºè®®ä½¿ç”¨ [Swagger UI](http://localhost:8080/api/swagger-ui/index.html) æŸ¥çœ‹å’Œæµ‹è¯•æ¥å£ï¼Œæ‰€æœ‰æ¥å£éƒ½æœ‰è¯¦ç»†çš„å‚æ•°è¯´æ˜å’Œç¤ºä¾‹ã€‚è¯¦ç»†ä½¿ç”¨æŒ‡å—è¯·å‚è€ƒ [SWAGGER_USAGE.md](./SWAGGER_USAGE.md)

#### 1. ç”¨æˆ·æ³¨å†Œ

**POST** `/user/register`

**è¯·æ±‚ä½“ï¼š**
```json
{
  "userAccount": "testuser",
  "userPassword": "12345678",
  "checkPassword": "12345678"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 0,
  "data": 1,
  "message": "ok"
}
```

#### 2. ç”¨æˆ·ç™»å½•

**POST** `/user/login`

**è¯·æ±‚ä½“ï¼š**
```json
{
  "userAccount": "testuser",
  "userPassword": "12345678"
}
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 0,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "user": {
      "id": 1,
      "username": "testuser",
      "userAccount": "testuser",
      "avatarUrl": "https://...",
      "gender": "unknown",
      "phone": "testphone",
      "email": "test@example.com",
      "userStatus": "active",
      "createTime": "2024-01-01T00:00:00",
      "userRole": "user"
    }
  },
  "message": "ok"
}
```

#### 3. ç”¨æˆ·æ³¨é”€

**POST** `/user/logout`

**è¯·æ±‚å¤´ï¼š**
```
Authorization: <token>
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 0,
  "data": 1,
  "message": "ok"
}
```

#### 4. è·å–å½“å‰ç”¨æˆ·

**GET** `/user/getInfo`

**è¯·æ±‚å¤´ï¼š**
```
Authorization: <token>
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 0,
  "data": {
    "id": 1,
    "username": "testuser",
    "userAccount": "testuser",
    "avatarUrl": "https://...",
    "gender": "unknown",
    "phone": "testphone",
    "email": "test@example.com",
    "userStatus": "active",
    "createTime": "2024-01-01T00:00:00",
    "userRole": "user"
  },
  "message": "ok"
}
```

#### 5. æœç´¢ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰

**GET** `/admin/getUserList?username=test`

**è¯·æ±‚å¤´ï¼š**
```
Authorization: <token>
```

**è¯´æ˜ï¼š** éœ€è¦ç®¡ç†å‘˜æƒé™ï¼ˆuserRole = "admin"ï¼‰

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 0,
  "data": [
    {
      "id": 1,
      "username": "testuser",
      "userAccount": "testuser",
      ...
    }
  ],
  "message": "ok"
}
```

#### 6. åˆ é™¤ç”¨æˆ·ï¼ˆç®¡ç†å‘˜ï¼‰

**POST** `/admin/deleteUser`

**è¯·æ±‚å¤´ï¼š**
```
Authorization: <token>
```

**è¯·æ±‚ä½“ï¼š**
```json
1
```

**è¯´æ˜ï¼š** éœ€è¦ç®¡ç†å‘˜æƒé™ï¼ˆuserRole = "admin"ï¼‰ï¼Œæ‰§è¡Œé€»è¾‘åˆ é™¤

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "code": 0,
  "data": true,
  "message": "ok"
}
```

## æŠ€æœ¯ç‰¹æ€§

### 1. å¯†ç åŠ å¯†
- ä½¿ç”¨ Spring Security çš„ `BCryptPasswordEncoder` è¿›è¡Œå¯†ç åŠ å¯†
- å¯†ç å­˜å‚¨ä¸º BCrypt å“ˆå¸Œå€¼ï¼Œä¸å¯é€†

### 2. Token è®¤è¯
- ç™»å½•æˆåŠŸåç”Ÿæˆ Token
- Token å­˜å‚¨åœ¨ Redis ä¸­ï¼Œè®¾ç½®è¿‡æœŸæ—¶é—´
- é€šè¿‡æ‹¦æˆªå™¨éªŒè¯ Token æœ‰æ•ˆæ€§
- ä½¿ç”¨ ThreadLocal å­˜å‚¨å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯

### 3. ç”¨æˆ·ä¿¡æ¯è„±æ•
- è¿”å›ç”¨æˆ·ä¿¡æ¯æ—¶è‡ªåŠ¨è„±æ•æ•æ„Ÿå­—æ®µï¼ˆå¦‚æ‰‹æœºå·ã€é‚®ç®±ï¼‰
- ä½¿ç”¨ DTO å¯¹è±¡è¿›è¡Œæ•°æ®ä¼ è¾“

### 4. ç»Ÿä¸€å¼‚å¸¸å¤„ç†
- å…¨å±€å¼‚å¸¸å¤„ç†å™¨ç»Ÿä¸€å¤„ç†ä¸šåŠ¡å¼‚å¸¸
- è‡ªå®šä¹‰é”™è¯¯ç å’Œé”™è¯¯ä¿¡æ¯
- ç»Ÿä¸€çš„é”™è¯¯å“åº”æ ¼å¼

### 5. æƒé™æ§åˆ¶
- åŸºäºæ‹¦æˆªå™¨çš„æƒé™æ ¡éªŒ
- ç®¡ç†å‘˜åŠŸèƒ½éœ€è¦éªŒè¯ç”¨æˆ·è§’è‰²

### 6. è·¨åŸŸæ”¯æŒ
- é…ç½® CORS è·¨åŸŸè®¿é—®
- æ”¯æŒå‰åç«¯åˆ†ç¦»éƒ¨ç½²


## æµ‹è¯•

è¿è¡Œå•å…ƒæµ‹è¯•ï¼š

```bash
mvn test
```

## éƒ¨ç½²

### Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

é¡¹ç›®æ”¯æŒ Docker å®¹å™¨åŒ–éƒ¨ç½²ï¼Œæä¾›ä¸€é”®å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒï¼ˆMySQL + Redis + åº”ç”¨ï¼‰ï¼š

```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d
```

**è¯¦ç»†éƒ¨ç½²è¯´æ˜è¯·å‚è€ƒ**ï¼š[DOCKER.md](./DOCKER.md)

### æ‰‹åŠ¨éƒ¨ç½²

#### 1. å¯åŠ¨ MySQL å’Œ Redis

ç¡®ä¿ MySQL å’Œ Redis æœåŠ¡å·²å¯åŠ¨å¹¶æ­£å¸¸è¿è¡Œã€‚

#### 2. æ„å»ºå’Œè¿è¡Œåº”ç”¨

```bash
# æ‰“åŒ…
mvn clean package

# è¿è¡Œ
java -jar target/ahz-userhub-backend-0.0.1-SNAPSHOT.jar
```

## å¸¸è§é—®é¢˜

### 1. Redis è¿æ¥å¤±è´¥
- ç¡®ä¿ Redis æœåŠ¡å·²å¯åŠ¨
- æ£€æŸ¥ `application.yml` ä¸­çš„ Redis é…ç½®

### 2. MySQL è¿æ¥å¤±è´¥
- æ£€æŸ¥ MySQL æœåŠ¡æ˜¯å¦å¯åŠ¨
- éªŒè¯æ•°æ®åº“ç”¨æˆ·åå’Œå¯†ç 
- ç¡®è®¤æ•°æ®åº“ `ahz_userhub` å·²åˆ›å»º

### 3. Token éªŒè¯å¤±è´¥
- æ£€æŸ¥è¯·æ±‚å¤´ä¸­æ˜¯å¦æºå¸¦ `Authorization` å­—æ®µ
- ç¡®è®¤ Token æœªè¿‡æœŸï¼ˆRedis ä¸­æ˜¯å¦å­˜åœ¨ï¼‰
- éªŒè¯ Token æ ¼å¼æ˜¯å¦æ­£ç¡®




## æ›´æ–°æ—¥å¿—

### **v1.0** (2024-10-29)
- å®ç°ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æŸ¥è¯¢ã€åˆ é™¤åŠŸèƒ½
- å®ç°ç»Ÿä¸€å“åº”æ ¼å¼ï¼ˆResultï¼‰
- å®ç°å…¨å±€å¼‚å¸¸å¤„ç†æœºåˆ¶
- å®ŒæˆåŸºç¡€é¡¹ç›®æ¶æ„æ­å»º

### **v1.1** (2024-11-10)
- å¼•å…¥ Spring Security BCrypt å¯†ç åŠ å¯†
- ä¼˜åŒ–å¯†ç å­˜å‚¨å®‰å…¨æ€§ï¼Œä½¿ç”¨ BCrypt å“ˆå¸Œç®—æ³•
- æ›´æ–°å¯†ç éªŒè¯é€»è¾‘ï¼Œæ”¯æŒåŠ å¯†å¯†ç æ¯”å¯¹
- ä¼˜åŒ–ç”¨æˆ·æ³¨å†Œå’Œç™»å½•æµç¨‹
- é›†æˆ Swagger ï¼Œæä¾›å¯è§†åŒ– API æ–‡æ¡£
- åœ¨ Controller ä¸­æ·»åŠ  Swagger æ³¨è§£ï¼Œå®Œå–„æ¥å£æ–‡æ¡£è¯´æ˜

### **v2.0** (2024-11-18)
- å¼•å…¥ Redis ç¼“å­˜ï¼Œç”¨äº Token å­˜å‚¨
- å®ç°åŸºäº Token çš„ç™»å½•è®¤è¯æœºåˆ¶
- æ·»åŠ ç™»å½•æ‹¦æˆªå™¨ï¼ˆLoginInterceptorï¼‰ï¼Œå®ç°è¯·æ±‚æ‹¦æˆªå’Œæƒé™æ ¡éªŒ
- å®ç°ç”¨æˆ·ä¸Šä¸‹æ–‡ç®¡ç†ï¼ˆUserContextï¼‰ï¼Œä½¿ç”¨ ThreadLocal å­˜å‚¨å½“å‰ç”¨æˆ·
- ä¼˜åŒ–ç™»å½•çŠ¶æ€ç®¡ç†ï¼ŒToken å­˜å‚¨åœ¨ Redis ä¸­
- å®ç°ç”¨æˆ·æ³¨é”€åŠŸèƒ½ï¼Œæ¸…é™¤ Redis ä¸­çš„ Token
- æ·»åŠ  LoginResponse å“åº”ç±»ï¼Œè¿”å› Token å’Œç”¨æˆ·ä¿¡æ¯
- 

### **v2.1** (2024-11-26)
- é…ç½® CORS è·¨åŸŸæ”¯æŒï¼Œè§£å†³å‰åç«¯åˆ†ç¦»éƒ¨ç½²é—®é¢˜
- æ·»åŠ  UserConvertor å¯¹è±¡è½¬æ¢å·¥å…·ï¼Œå®ç° User åˆ° UserDTO çš„è½¬æ¢
- ä¼˜åŒ– WebMvcConfig é…ç½®ï¼Œå®Œå–„è·¨åŸŸå’Œæ‹¦æˆªå™¨é…ç½®
- æ·»åŠ  SwaggerConfig é…ç½®ç±»ï¼Œå®Œå–„ API æ–‡æ¡£é…ç½®
- ä¼˜åŒ–å‰åç«¯åˆ†ç¦»éƒ¨ç½²æ”¯æŒ
- å®Œå–„ä»£ç ç»“æ„å’Œå·¥å…·ç±»è®¾è®¡

### **v2.2** (2024-12-01)
- æ·»åŠ  Dockerfile æ”¯æŒï¼Œæ”¯æŒå®¹å™¨åŒ–éƒ¨ç½²
- æ·»åŠ  docker-compose.ymlï¼Œä¸€é”®å¯åŠ¨å®Œæ•´å¼€å‘ç¯å¢ƒï¼ˆMySQL + Redis + åº”ç”¨ï¼‰
- æ·»åŠ  application-prod.yml ç”Ÿäº§ç¯å¢ƒé…ç½®
- ä¼˜åŒ–éƒ¨ç½²æ–‡æ¡£ï¼Œæä¾›å¤šç§éƒ¨ç½²æ–¹å¼è¯´æ˜

## ç‰ˆæƒå£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›å­¦ä¹ äº¤æµä½¿ç”¨ã€‚
